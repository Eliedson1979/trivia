(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{29:function(e,t,a){},39:function(e,t,a){e.exports=a(63)},50:function(e,t){},51:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(22),i=a.n(c),s=a(18),o=a(7),l=a(3),u=a(38),m=a(4),p=a.n(m),d=a(15),f=a(11),y=a(5),b=a(6),h=a(9),v=a(8),g=a(33),E=a(34),O=a(21),k=a(23),N=function(e,t){localStorage.setItem(e,t)},w=function(e){return localStorage.getItem(e)};w("options")||N("options",JSON.stringify({category:"Any category",difficulty:"Any difficulty",type:"Any Type",quantity:"10"}));var S=function(){var e=Object(d.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://opentdb.com/api_token.php?command=request",e.next=4,fetch("https://opentdb.com/api_token.php?command=request");case 4:return t=e.sent,e.next=7,t.json();case 7:return a=e.sent,e.abrupt("return",a.token);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),C=function(e){return"True / False"===e?"boolean":"Multiple Choice"===e?"multiple":void 0},j=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r,c,i,s,o,l,u=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:JSON.parse(w("options")),n=a.category,r=a.difficulty,c=a.type,i=a.quantity,n="string"===typeof n?"":n,r=r.includes("Any")?"":r.toLowerCase(),c=c.includes("Any")?"":C(c),s="https://opentdb.com/api.php?amount=".concat(i,"&token=").concat(t,"&category=").concat(n,"&difficulty=").concat(r,"&type=").concat(c),e.prev=5,e.next=8,fetch(s);case 8:return o=e.sent,e.next=11,o.json();case 11:return l=e.sent,e.abrupt("return",l);case 15:return e.prev=15,e.t0=e.catch(5),e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://opentdb.com/api_category.php",e.next=4,fetch("https://opentdb.com/api_category.php");case 4:return t=e.sent,e.next=7,t.json();case 7:return a=e.sent,n=a.trivia_categories,e.abrupt("return",n);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),D=a(31),x=a.n(D);function q(e,t){return"https://www.gravatar.com/avatar/".concat(x()(t).toString())}a(51);function I(e){var t=e.email,a=e.name,n=e.score,c=e.hideScore,i=e.homeBtn,s=Object(l.f)();return r.a.createElement("header",{className:"header-game"},!c&&r.a.createElement("div",{className:"Score-Container"},r.a.createElement("p",{"data-testid":"header-score"},n)),i&&r.a.createElement("button",{type:"button",className:"home-button","data-testid":"btn-go-home",onClick:function(){return s.push("/")},alt:"House Icon"},r.a.createElement(O.b,null)),r.a.createElement("div",{className:"Player-Container"},r.a.createElement("p",{"data-testid":"header-player-name"},a),r.a.createElement("img",{src:q(0,t),alt:a,"data-testid":"header-profile-picture"})))}I.defaultProps={email:"",name:"",score:0,hideScore:!1,homeBtn:!1};var T=Object(o.b)((function(e){return{email:e.player.gravatarEmail,name:e.player.name,score:e.player.score}}))(I),_=a(37);a(29);function L(e){var t=e.inSettings;return r.a.createElement(_.a.Oval,{className:"Loading",stroke:t?"#dfe3eb":"#282c34"})}L.defaultProps={inSettings:!1};var P=L;a(57);function R(e){var t=e.answer,a=e.index,n=e.btnIsDisable,c=e.click,i=e.correctAnswer,s=e.onClick;return r.a.createElement("button",{key:t,type:"button",name:t===i?"correct":"wrong",style:c?t===i?{backgroundColor:"#697a21",border:"3px solid #697a21",color:"white"}:{backgroundColor:"#dd403a",border:"3px solid #dd403a",color:"white"}:{},className:"Answer-Btn",disabled:n,"data-testid":t===i?"correct-answer":"wrong-answer-".concat(a),onClick:s,value:t},Object(k.decode)(t))}R.defaultProps={answer:"",correctAnswer:"",btnIsDisable:!1,click:!1,index:0};var J=R,B={gameQuestions:[],gameCategory:"",questionName:"",questionNumber:0,answers:[],correctAnswer:"",questionDifficulty:"",userAnswer:"",btnIsDisable:!1,seconds:30,click:!1,isFetching:!0},M=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=Object(f.a)({},B),e.handleClick=function(t){var a=t.target,n=a.name,r=a.value;e.setState({btnIsDisable:!0,click:!0,userAnswer:r},(function(){var t=e.state.questionDifficulty;"correct"===n&&e.calculateScore(t),clearInterval(e.timerId)}))},e.redirectTo=function(t){e.props.history.push(t)},e.setGame=Object(d.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=3,t.next=3,j(w("token"));case 3:(n=t.sent).response_code===a?(localStorage.removeItem("token"),e.redirectTo("/")):(e.setState({gameQuestions:n.results}),e.setNewQuestion(),e.countDownTimer(),e.setState({isFetching:!1}));case 5:case"end":return t.stop()}}),t)}))),e.nextQuestion=function(){e.state.questionNumber===JSON.parse(w("options")).quantity-1?e.redirectTo("/feedback"):e.setState((function(e){return{userAnswer:"",questionNumber:e.questionNumber+1,btnIsDisable:!1,click:!1}}),(function(){e.setNewQuestion(),e.setState({seconds:30,btnIsDisable:!1}),e.countDownTimer()}))},e.setNewQuestion=function(){var t=e.state,a=t.questionNumber,n=t.gameQuestions,r=e.setGameAnswers(n[a]);e.setState({questionDifficulty:n[a].difficulty,gameCategory:n[a].category,questionName:n[a].question,correctAnswer:n[a].correct_answer,answers:r})},e.setGameAnswers=function(e){var t=e.correct_answer,a=e.incorrect_answers;return[].concat(Object(u.a)(a),[t]).sort((function(){return Math.random()-.5}))},e.calculateScore=function(t){var a=e.state.seconds,n=e.props,r=n.score,c=n.addCalcDispatch;"easy"===t&&c(r+10+1*a),"medium"===t&&c(r+10+2*a),"hard"===t&&c(r+10+3*a)},e.countDownTimer=function(){e.timerId=setInterval((function(){var t=e.state,a=t.seconds;return t.click||0===a?(clearInterval(e.timerId),e.setState({btnIsDisable:!0,click:!0})):e.setState((function(e){return{seconds:e.seconds-1}}))}),1e3)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.setGame()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerId)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isFetching,n=t.gameCategory,c=t.questionName,i=t.answers,s=t.correctAnswer,o=t.btnIsDisable,l=t.click,u=t.questionDifficulty,m=t.seconds,p=t.userAnswer;return r.a.createElement("main",{className:"Game-Container"},a?r.a.createElement(P,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(T,null),r.a.createElement("section",{className:"Game"},r.a.createElement("div",{className:"Informations-Container"},r.a.createElement("div",{className:"Timer"},r.a.createElement(g.a,null),r.a.createElement("p",null,m)),r.a.createElement("div",{className:"Difficulty"},r.a.createElement(E.a,{className:u})),r.a.createElement("div",{className:"Game-Question"},r.a.createElement("h3",{"data-testid":"question-category"},n),r.a.createElement("h1",{"data-testid":"question-text"},Object(k.decode)(c)))),r.a.createElement("div",{className:"Answers-Container","data-testid":"answer-options"},r.a.createElement("div",{className:"Answer-Result ".concat(l?"Visible":"Hide")},p===s?r.a.createElement(O.a,{className:"easy"}):r.a.createElement(O.c,{className:"hard"})),i.map((function(t,a){return r.a.createElement(J,{key:t,answer:t,index:a,click:l,btnIsDisable:o,correctAnswer:s,onClick:e.handleClick})}))),r.a.createElement("div",{className:"Next-BtnContainer ".concat(l?"Visible":"Hide")},l&&r.a.createElement("button",{type:"button",name:"next",className:"Next-Button","data-testid":"btn-next",onClick:this.nextQuestion},"Next")))))}}]),a}(n.Component),F=Object(o.b)((function(e){return{score:e.player.score}}),(function(e){return{addCalcDispatch:function(t){return e({type:"ADD_CALC",payload:t})}}}))(M),Q=a(16),G=a(27),U=(a(58),a(59),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",isSaveButtonDisabled:!0},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(Q.a)({},n,r),(function(){return e.buttonChange()}))},e.buttonChange=function(){var t=e.state,a=t.email,n=t.name,r=/\S+@\S+\.\S+/.test(a)&&n.length>=3;e.setState({isSaveButtonDisabled:!r})},e.handleClick=function(){var t=Object(d.a)(p.a.mark((function t(a){var n,r,c,i,s,o,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,r=n.name,c=n.email,i=e.props,s=i.addPlayerDispatch,o=i.history,s({name:r,email:c}),t.next=6,S();case 6:l=t.sent,N("token",l),o.push("/game");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.state.isSaveButtonDisabled,t=this.props.history;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",{className:"App-title"},"Tr",r.a.createElement("span",null,"ivi"),"a"),r.a.createElement("p",null,"SUA VEZ"),r.a.createElement("form",{className:"formLogin"},r.a.createElement("label",{htmlFor:"input-name"},"Name",r.a.createElement("input",{name:"name",id:"input-name",onChange:this.handleChange,"data-testid":"input-player-name",maxLength:"17"})),r.a.createElement("label",{htmlFor:"input-email"},"Email",r.a.createElement("input",{name:"email",onChange:this.handleChange,"data-testid":"input-gravatar-email",id:"input-email"})),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{"data-testid":"btn-play",onClick:this.handleClick,type:"submit",disabled:e},r.a.createElement("div",null,r.a.createElement(G.a,null))),r.a.createElement("button",{type:"button","data-testid":"btn-settings",onClick:function(){return t.push("/settings")}},r.a.createElement("div",null,r.a.createElement(G.b,null)))))))}}]),a}(r.a.Component)),H=Object(o.b)(null,(function(e){return{addPlayerDispatch:function(t){return e({type:"ADD_PLAYER",payload:t})}}}))(U),W=(a(60),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(y.a)(this,a),(e=t.call(this)).getCategoriesList=Object(d.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,A();case 3:t.t1=t.sent,t.t2={categories:t.t1},t.t3=function(){var t=e.state,a=t.categories,n=t.category,r="string"===typeof n?"":a.find((function(e){return e.id===n})).name;e.setState({category:r||"",isLoading:!1})},t.t0.setState.call(t.t0,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))),e.setNewOption=function(t){var a=t.target;if(e.setState(Object(Q.a)({},a.name,a.value)),"category"!==a.name||a.value.includes("Any"))e.saveOption(a.name,a.value);else{var n=e.state.categories.find((function(e){return e.name===a.value})).id;e.saveOption(a.name,n)}},e.saveOption=function(e,t){N("options",JSON.stringify(Object(f.a)(Object(f.a)({},JSON.parse(w("options"))),{},Object(Q.a)({},e,t))))},w("options")||N("options",JSON.stringify({category:"Any category",difficulty:"Any difficulty",type:"Any Type",quantity:"10"})),e.state={category:JSON.parse(w("options")).category,difficulty:JSON.parse(w("options")).difficulty,type:JSON.parse(w("options")).type,quantity:JSON.parse(w("options")).quantity,categories:[],isLoading:!0},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.getCategoriesList()}},{key:"render",value:function(){var e=this.state,t=e.category,a=e.difficulty,n=e.type,c=e.categories,i=e.quantity,o=e.isLoading;return r.a.createElement("main",{className:"Settings-Container"},r.a.createElement("h2",{"data-testid":"settings-title"},"Settings"),r.a.createElement("section",{className:"Settings"},o?r.a.createElement(P,{inSettings:!0}):r.a.createElement("form",{className:"Settings-Form"},r.a.createElement("label",{htmlFor:"quantity"},"Questions Quantity",r.a.createElement("input",{onChange:this.setNewOption,value:i,name:"quantity",id:"quantity",type:"number"})),r.a.createElement("label",{htmlFor:"category"},"Category",r.a.createElement("select",{onChange:this.setNewOption,value:t,name:"category",id:"category"},r.a.createElement("option",null,"Any Category"),c.map((function(e){var t=e.id,a=e.name;return r.a.createElement("option",{key:t},a)})))),r.a.createElement("label",{htmlFor:"difficulty"},"Difficulty",r.a.createElement("select",{onChange:this.setNewOption,value:a,name:"difficulty",id:"difficulty"},r.a.createElement("option",{id:"any"},"Any difficulty"),r.a.createElement("option",{id:"easy"},"Easy"),r.a.createElement("option",{id:"medium"},"Medium"),r.a.createElement("option",{id:"hard"},"Hard"))),r.a.createElement("label",{htmlFor:"type"},"Type",r.a.createElement("select",{onChange:this.setNewOption,value:n,name:"type",id:"type"},r.a.createElement("option",{id:"any"},"Any Type"),r.a.createElement("option",{id:"multiple"},"Multiple Choice"),r.a.createElement("option",{id:"boolean"},"True / False"))),r.a.createElement(s.b,{className:"Save-Btn",to:"/"},"Done"))))}}]),a}(n.Component)),Y=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score;return r.a.createElement("div",{className:"score-info"},r.a.createElement("p",{id:"total-question","data-testid":"feedback-total-question"},1===t?"1 Right answer":"".concat(t," Right answers")),r.a.createElement("p",{className:"total-score","data-testid":"feedback-total-score"},a," ","Points"))}}]),a}(n.Component),V=Object(o.b)((function(e){return{score:e.player.score,assertions:e.player.assertions}}))(Y),Z=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={idChange:!1},e.componentDidMount=function(){e.props.assertions>=3&&e.setState({idChange:!0})},e.handlerMessage=function(){return e.props.assertions>=3?"Well Done!":"Could be better..."},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.state.idChange;return r.a.createElement("div",null,r.a.createElement("p",{className:e?"goodMessage":"badMessage","data-testid":"feedback-text"},this.handlerMessage()))}}]),a}(n.Component),z=Object(o.b)((function(e){return{assertions:e.player.assertions}}))(Z),K=(a(61),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).saveUserScore=function(){var t=e.props,a=t.name,n=t.score,r={name:a,score:n,picture:q(0,t.gravatarEmail)};if(a&&0!==n){var c=JSON.parse(localStorage.getItem("ranking")||"[]").concat(r);N("ranking",JSON.stringify(c))}},e.handleClick=function(t){var a=e.props,n=a.history,r=a.resetPlayer;"/"===t&&r(),n.push(t)},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.saveUserScore()}},{key:"componentWillUnmount",value:function(){(0,this.props.resetScore)()}},{key:"render",value:function(){var e=this;return r.a.createElement("main",null,r.a.createElement(T,{hideScore:!0,homeBtn:!0}),r.a.createElement("div",{className:"feedback-container"},r.a.createElement(z,null),r.a.createElement(V,null),r.a.createElement("div",{className:"feedback-buttons"},r.a.createElement("button",{type:"button",onClick:function(){return e.handleClick("/")},"data-testid":"btn-play-again",className:"playBtn"},"Play again"),r.a.createElement("button",{type:"button",onClick:function(){return e.handleClick("/ranking")},"data-testid":"btn-ranking",className:"rankingBtn"},"Ranking"))))}}]),a}(n.Component)),X=Object(o.b)((function(e){return{name:e.player.name,score:e.player.score,gravatarEmail:e.player.gravatarEmail}}),(function(e){return{resetPlayer:function(){return e({type:"RESET_OLD_PLAYER"})},resetScore:function(){return e({type:"RESET_SCORE"})}}}))(K),$=(a(62),function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(y.a)(this,a),(e=t.call(this)).state={items:[]},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("ranking")||"[]");e=e.sort((function(e,t){return t.score-e.score})),this.setState({items:e})}},{key:"render",value:function(){var e=this.state.items;return r.a.createElement("div",null,r.a.createElement(T,{hideScore:!0,homeBtn:!0}),r.a.createElement("div",{className:"ranking-body"},r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("div",{className:"ranking-list"},e.map((function(e,t){return r.a.createElement("div",{key:e.name,className:"ranking-list-card"},r.a.createElement("div",null,r.a.createElement("img",{src:e.picture,alt:"Avatar of ".concat(e.name),onError:q})),r.a.createElement("p",{"data-testid":"player-name-".concat(t),className:"card-personal-name"},e.name),r.a.createElement("p",{"data-testid":"player-score-".concat(t),className:"card-personal-score"},e.score," ","points"))})))))}}]),a}(n.Component));function ee(){return r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:H}),r.a.createElement(l.a,{path:"/game",component:F}),r.a.createElement(l.a,{path:"/settings",component:W}),r.a.createElement(l.a,{path:"/feedback",component:X}),r.a.createElement(l.a,{path:"/ranking",component:$}))}var te=a(19),ae=a(36),ne=a(35),re={name:"Player",assertions:0,score:0,gravatarEmail:""};var ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PLAYER":return Object(f.a)(Object(f.a)({},e),{},{name:t.payload.name,gravatarEmail:t.payload.email});case"ADD_CALC":return Object(f.a)(Object(f.a)({},e),{},{score:t.payload,assertions:e.assertions+1});case"RESET_OLD_PLAYER":return Object(f.a)(Object(f.a)({},e),{},{name:"Player",assertions:0,score:0,gravatarEmail:""});case"RESET_SCORE":return Object(f.a)(Object(f.a)({},e),{},{assertions:0,score:0});default:return e}},ie=Object(te.combineReducers)({player:ce}),se=Object(te.createStore)(ie,Object(ne.composeWithDevTools)(Object(te.applyMiddleware)(ae.a)));window.Cypress&&(window.store=se);var oe=se;i.a.render(r.a.createElement(o.a,{store:oe},r.a.createElement(s.a,null,r.a.createElement(ee,null))),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f1a670bf.chunk.js.map